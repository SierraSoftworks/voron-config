[gcode_macro M141]
gcode:
    {% set temp = [params.S|default("30")|float, 30] | max %}

    SET_TEMPERATURE_FAN_TARGET temperature_fan="chamber_fan" target={s}

[gcode_macro M191]
gcode:
    {% set temp = params.S|default("30")|float %}
    {% set minimum = [0, temp]|max %}
    {% set maximum = [30, temp+1]|max %}

    _STATUS_HEATING
    _NOTIFY T={"Heating Chamber to %d C" % (temp,)}
    M141 S{s}

    TEMPERATURE_WAIT SENSOR="temperature_fan chamber_fan" MINIMUN={minimum} MAXIMUM={maximum}